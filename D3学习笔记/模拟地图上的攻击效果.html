<!DOCTYPE html>
<html>

	<head lang="en">
		<meta charset="UTF-8">
		<title></title>
		<script src="js/d3.v3.js">
		</script>

	</head>

	<body>

		<script>
			var width = 600;
			var height = 600;

			var svg = d3.select("body")
				.append("svg")
				.attr("class", "svg")
				.attr("width", width)
				.attr("height", height);

			var line = svg.append("line")
				.style("stroke", "blue")
				.style("stroke-width", 2)
				.attr("opacity", 0.3)
				.transition()
				.delay(2000)
				.duration(1000)
				.attr("x1", 20)
				.attr("y1", 20)
				.attrTween("x2", function() {
					var interpolate = d3.interpolate(20, 300);
					var _this = this;
					return function(t) {
						_this._current = interpolate(t);
						return _this._current;
					};
				})
				.attrTween("y2", function() {
					var interpolate = d3.interpolate(20, 300);
					var _this = this;
					return function(t) {
						_this._current = interpolate(t);
						return _this._current;
					};
				})
				.transition()
				.duration(1000)
				.attrTween("opacity", function() {
					var interpolate = d3.interpolate(0.3, 0);
					var _this = this;
					return function(t) {
						_this._current = interpolate(t);
						return _this._current;
					};
				})
				.remove();

			var defs = svg.append("defs");
			var radialGradient = defs.append("radialGradient")
				.attr("id", "myRadialGradient")
				.attr("fx", 0.5)
				.attr("fy", 0.5)
				.attr("cx", 0.5)
				.attr("cy", 0.5);

			var stop1 = radialGradient.append("stop")
				.attr("offset", "0%")
				.attr("stop-color", "#F00")
				.attr("stop-opacity", 0);

			var stop2 = radialGradient.append("stop")
				.attr("offset", "100%")
				.attr("stop-color", "#0FF")
				.attr("stop-opacity", 0.7);

			var circle = svg
				.append("circle")
				.attr("stroke", "none")
				.attr("cx", 20)
				.attr("cy", 20)
				.transition()
				.duration(2000)
				.attrTween("r", function() {
					var interpolate = d3.interpolate(0, 20);
					var _this = this;
					return function(t) {
						_this._current = interpolate(t);
						return _this._current;
					};
				})
				.style("fill", "url(#" + radialGradient.attr("id") + ")")
				.transition()
				.duration(1000)
				.attrTween("cx", function() {
					var interpolate = d3.interpolate(20, 300);
					var _this = this;
					return function(t) {
						_this._current = interpolate(t);
						return _this._current;
					};
				})
				.attrTween("cy", function() {
					var interpolate = d3.interpolate(20, 300);
					var _this = this;
					return function(t) {
						_this._current = interpolate(t);
						return _this._current;
					};
				})
				.transition()
				.duration(1000)
				.attrTween("opacity", function() {
					var interpolate = d3.interpolate(1, 0);
					var _this = this;
					return function(t) {
						_this._current = interpolate(t);
						return _this._current;
					};
				})
				.remove();
		</script>

	</body>

</html>